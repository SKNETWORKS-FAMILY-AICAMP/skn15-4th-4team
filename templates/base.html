<!doctype html>
<html lang="ko" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <title>{% block title %}챗봇{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/chat.css' %}">
  {% block head %}{% endblock %}
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <aside class="col-12 col-md-3 col-lg-2 border-end min-vh-100 p-3 bg-body-tertiary sticky-top">
      <div class="d-flex align-items-center gap-2 mb-3">
        <i class="bi bi-robot fs-4"></i>
        <strong>옵션</strong>
      </div>

      <div class="form-check form-switch mb-2">
        <input class="form-check-input" type="checkbox" id="rememberHistory" checked>
        <label class="form-check-label" for="rememberHistory">이전 대화 기억 사용</label>
      </div>
      <div class="form-check form-switch mb-3">
        <input class="form-check-input" type="checkbox" id="autoTopic">
        <label class="form-check-label" for="autoTopic">자동 주제 전환 감지</label>
      </div>

      <label class="form-label">주제 관련 임계값(휴리스틱)</label>
      <input type="range" class="form-range mb-3" min="0" max="1" step="0.01" value="0.72" id="topicThreshold">

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" id="showToken" checked>
        <label class="form-check-label" for="showToken">토큰 대시보드 표시</label>
      </div>
      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="showLatency">
        <label class="form-check-label" for="showLatency">지연 대시보드 표시</label>
      </div>

      <div class="vstack gap-2">
        <button class="btn btn-outline-secondary btn-sm" id="btnSync">메모리 ↔︎ 동기화</button>
        <button class="btn btn-outline-secondary btn-sm" id="btnExport">화면 채팅 로그 지우기</button>
      </div>

      <hr>

      <h6 class="text-uppercase text-muted">응답 모드</h6>
      <select class="form-select form-select-sm mb-3" id="modeSelect">
        <option>일반 대화</option>
        <option>요약 모드</option>
        <option>코드 도움</option>
      </select>

      <h6 class="text-uppercase text-muted">웹 검색 설정</h6>
      <label class="form-label">문서 검색 개수(k)</label>
      <input type="range" class="form-range mb-3" min="1" max="10" value="3" id="docTopK">

      <div class="small text-muted">※ 사이드바 값은 요청 시 메타로 같이 전송됩니다.</div>
    </aside>

    <!-- Main -->
    <main class="col-12 col-md-9 col-lg-10 p-3">
      {% block content %}{% endblock %}
    </main>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% block script %}{% endblock %}
</body>
</html>
